{% extends "base.html" %}
{% block content %}
<div class="module">
    <h1>
        Complete DevOps Operations (Tool: Azure DevOps)
    </h1>

    <figure>
        <img
        src="https://d585tldpucybw.cloudfront.net/sfimages/default-source/blogs/2018/2018-09/870x220_telerik-blogs.png?sfvrsn=42f2f9a4_1"
        width="33%">
        <figcaption>
        </figcaption>
    </figure>

    <p class="leadquote">
        "It's clear DevOps has become increasingly critical to a team's
        success." -- Jamie Cool, Microsoft
    </p>

    <details>
        <summary class="sum1">
            Lesson 1: Microsoft's DevOps Tools
        </summary>

        <p>
            Here we have Denis Petelin presenting, first, his understanding
            of what DevOps is, and secondly, how the Microsoft
            toolkit offers end-to-end support for good DevOps practices:
        </p>

        <figure>
            <iframe width="560" height="315"
            src="https://www.youtube.com/embed/r5venuVst40" frameborder="0"
            allow="accelerometer; autoplay;
            encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
        </iframe>
        <figcaption>
            Azure DevOps, Part I
        </figcaption>
    </figure>

    <figure>
        <iframe width="560" height="315"
        src="https://www.youtube.com/embed/8jjtY9sxNlY"
        frameborder="0"
        allow="accelerometer; autoplay; encrypted-media;
        gyroscope; picture-in-picture"
        allowfullscreen>
    </iframe>
    <figcaption>
        Azure DevOps, Part II
    </figcaption>
</figure>

<p>
    Below are the key DevOps ideas that Denis presented, with some
    commentary as to how they relate to other material presented in
    our course:
</p>

<ol class="nested">
    <li>
        <span class="hilight">
            Small releases
        </span>
        <br />
        This is our
        incremental development
        idea stated a little differently. The result of adopting
        this practice is almost magical: whereas previously, you
        may have found yourself doing an eight-hour coding spree,
        and then testing and correcting bugs for another 20 hours,
        you will find that 12 one-hour sessions, each aimed to get
        a tiny part of your software working, will get the same
        amount of work done as the 8-hour session... but will be
        followed by 20 <i>minutes</i> of debugging.
    </li>

    <li>
        <span class="hilight">
            Everything as code
        </span>
        <br />
        <a href=" {% url 'devops:infra' %}">
            Infrastructure as code
        </a>
        is a
        part of this principle. But also, your tests should be
        code (<code>pytest</code>),
        and your code reviews should be code (<code>flake8</code>),
        and your builds should be code (<code>make</code>).
    </li>

    <li>
        <span class="hilight">
            Use components
        </span>
        <br />
        This is an extension of the UNIX tool philosophy, which
        over many years led to the idea of
        <a href=" {% url 'devops:micro' %}">
            microservices.
        </a>
        The basic idea is the code that has the fewest bugs
        and the minimum development time is the code you don't have
        to write, since somebody else already wrote it!
    </li>

    <li>
        <span class="hilight">
            Automate everything you can
        </span>
        <br />
        Automating routine workflows allows us to:

        <ol class="inner_nested">
            <li>
                Turn them into code that itself can be put under
                version control and tested.
            </li>
            <li>
                Remove the drudgery of these repeated tasks
                from humans and assign it to machines.
            </li>
            <li>
                Document these workflows through the very code
                that automates them.
            </li>
        </ol>
    </li>

    <li>
        <span class="hilight">
            Zero-bug mindset
        </span>
        <br />
        When we embrace the idea of (very) small releases, and
        adopt automated testing, there is no need for us to have
        any "bug backlog" at all: the automated tests should catch
        most problems, and anything they miss, since our release
        was a very small addition to the previous code, will be
        easy to track down.
    </li>

    <li>
        <span class="hilight">
            Develop resilience (be anti-fragile!)
        </span>
        <br />
        <a href="https://en.wikipedia.org/wiki/Nassim_Nicholas_Taleb">
        Nassim Taleb</a>
        teaches in Tandon's finance department. He has developed
        the idea of
        <a href="https://en.wikipedia.org/wiki/Antifragility">anti-fragility.
        </a>
        An application of that idea is Netflix's
        <a href="https://en.wikipedia.org/wiki/Chaos_Monkey">Chaos
        Monkey</a>
        tool, part of its
        <a
        href="https://en.wikipedia.org/wiki/Chaos_Monkey#Different_variants
        _of_the_Simian_Army">Simian
    Army</a> toolkit.
</li>

<li>
    <span class="hilight">
        Use cloud services
    </span>
    <br />
    This is really an extension of the "Use components"
    idea: why manage your own server room when there are pros
    at managing server rooms who will sell you their expertise
    at a reasonable cost?
</li>
</ol>

</details>

<details>
    <summary class="sum1">
        Lesson 2: DevOps at DRAFT
    </summary>

    <figure>
        <iframe width="560" height="315"
        src="https://www.youtube.com/embed/eDKJdFDGKKc"
        frameborder="0"
        allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture"
        allowfullscreen>
    </iframe>
    <figcaption>
        Trevor John on DevOps at DRAFT
    </figcaption>
</figure>

<p>
    Please watch this video, and pay special attention to the
    discussion about whether DevOps should be a job, or a way of
    working.
</p>

</details>

<details>
    <summary class="sum1">
        Azure DevOps Ecosystem
    </summary>

    <p>
        Microsoft Azure, as a part of its push towards the DevOps
        philosophy, provides services aimed at increasing productivity
        through deep integrations on its platform. The main aim is to
        enable continuous development (CD) of our production software
        and continuous integration (CI) of updates to the same. We
        explore various services provided by Microsoft below:
    </p>

    <ol class="nested">
        <li>
            <span class="hilight">
                Azure Boards
            </span>
            <br />
            Boards is a project management service offered by
            Microsoft aimed at integrating the development activity
            using  easy-to-use interface. Boards is primarily based on
            the Kanban system, originally designed for lean
            manufacturing by Toyota. Apart from tracking progress from
            "idea to release", Boards allows for scheduling of  stand-
            ups, sprints and planning meetings. Boards allows for
            CI/CD though a feature called Backlogs which allows for
            dynamic addition of user stories and requirements to
            product backlog. This feature, when coupled with Scrum and
            Kanban boards, can dramatically improve productivity and
            ease the workflow.
            <br />
            <br />
            Steps to integrate Azure Boards with GitHub
            <ol class="inner_nested">
                <li>
                    Sign in to Azure Boards and select your project
                </li>
                <li>
                    Select Project Settings-&gt;GitHub
                    Connections-&gt;Connect your GitHub Account
                </li>
                <li>
                    Azure will prompt for GitHub authorization and
                    inform about access to information
                </li>
                <li>
                    The user can select repositories where the user is
                    an administrator
                </li>
            </ol>
            <i>Note</i>
            <br />
            Once a connection is made, Azure will link GitHub pull
            and push requests with work orders on the platform.
            <br />
            Subsequent commit messages can include <i>AB#</i>
            followed by the work item ID. E.g.: AB#125 will record
            updates to work item with ID 125. Azure recognizes
            <i>fix, fixes, and fixed</i> as keywords to close an
            issue which are subsequently moved to the "Done"
            section of the Board.<br /> Additional examples can be
            found <a href="https://docs.microsoft.com/en-us/azure/devops/boards/github/link-to-from-github?view=azure-devops#use-ab-mention-to-link-from-github-commits-and-pull-requests"
            target="_blank" style="text-decoration: underline">here</a>
        </li>

        <li>
            <span class="hilight">
                Azure Artifacts
            </span>
            <br />
            Artifacts allow package management using existing CI/CD
            pipelines to enable efficient code sharing across
            different teams in an organization. Support exists to use
            npm, Maven and NuGet package managers. A new feature
            introduced by Microsoft, called Universal Package allows
            developers to bundle multiple files such as database
            snapshots, machine learning models, developer tools, 3D
            models and configuration scripts. Microsoft's compression
            technology allows savings of 10:1 in network transfers and
            storage utilization. Native integration with existing
            CI/CD pipelines enables quick integration in existing
            projects and production code.
            <br />
            <br />
            Steps to use Azure Artifacts with YAML (Python - PyPi)
            <ol class="inner_nested">
                <li>
                    Install twine<br />
                    <script src="https://gist.github.com/shaivaldalal/be1245b268d15c9f2c4794bd83839298.js"></script>
                </li>
                <li>
                    Authenticate Azure Artifacts with Twine
                    <br />
                    To authenticate twine, we must add the following
                    snippet to our <i>azure-pipelines.yml</i>
                    file
                    <br />
                    <script src="https://gist.github.com/shaivaldalal/f32577bd710d24c860b278ad33d19469.js"></script>
                    Note: <i>artifactFeeds</i> should contain the name
                    of Azure Artifacts feeds within your organization
                    and <i>externalFeeds</i> should contain one or
                    more connection endpoints including PyPi or other
                    feeds in the organization where the latest package
                    is required to be pushed
                </li>
                <li>
                    Use custom twine tasks to publish
                    <script src="https://gist.github.com/shaivaldalal/7029ab441b55b2f607388caa92ce71e0.js"></script>
                </li>
            </ol>
            <br />
            Steps to use Azure Artifacts with YAML (NPM)
            <ol class="inner_nested">
                <li>
                    Setting up the connection To publish to an
                    external npm registry, a service connection must
                    be created first. To do this, go to <i>Project
                    Settings</i>-&gt;<i>Services</i>-&gt;<i>New Service
                    Connection</i>. <br /> Select npm from the option
                    and fill the registry URL and enter the
                    credentials to connect.
                </li>
                <li>
                    Publishing to NPM
                    <script src="https://gist.github.com/shaivaldalal/ced1fa36bb004dd9429dcd7e0c6f36fb.js"></script>
                </li>
            </ol>
        </li>

        <li>
            <span class="hilight">
                Azure DevTest Labs
            </span>
            <br />
            Azure DevTest Labs is a service that helps developers
            and testers quickly create environments in Azure while
            minimizing waste and controlling cost. You can test the
            latest version of your application by quickly provisioning
            Windows and Linux environments using reusable templates and
            artifacts. Easily integrate your deployment pipeline with
            DevTest Labs to provision on-demand environments. Scale up
            your load testing by provisioning multiple test agents, and
            create pre-provisioned environments for training and demos.[1]
        </li>

        <li>
            <span class="hilight">
                Azure Pipelines
            </span>
            <br />
            Azure Pipelines helps you implement a build, test, and
            deployment pipeline for any app.You can use Azure
            Pipelines to build an app written in any language. You can
            either use YAML to define your pipelines or use the visual
            designer to do the same.

            When you use YAML, you define your pipeline mostly in code
            (a YAML file) alongside the rest of the code for your app.
            When you use the visual designer, you define a build
            pipeline to build and test your code, and then to publish
            artifacts. You also define a release pipeline to consume
            and deploy those artifacts to deployment targets.[3]
            <br />
            <br />
            Steps to Use Azure Pipelines with YAML[3]
            <br />
            You can configure your pipelines in a YAML file that
            exists alongside your code.
            <ol class="inner_nested">
                <li>
                      Configure Azure Pipelines to use your Git repo.
                </li>
                <li>
                    Edit your azure-pipelines.yml file to define your
                    build.
                </li>
                <li>
                    Push your code to your version control repository.
                    This action kicks off the default trigger to build and
                    deploy and then monitor the results.
                </li>
                <li>
                    Your code is now updated, built, tested, and packaged.
                    It can be deployed to any target.
                </li>
            </ol>
              <br />
              Use Azure Pipelines in the visual designer[3]
              <br />
              You can create and configure your build and release
              pipelines in the Azure DevOps Services web portal with the
              visual designer.

            <ol class="inner_nested">
                <li>
                  Configure Azure Pipelines to use your Git
                  repo.
                </li>
                <li>
                  Use the Azure Pipelines visual designer to create
                  and configure your build and release pipelines.
                </li>
                <li>
                  Push your code to your version control repository.
                  This action triggers your pipeline and runs tasks such
                  as  building or testing code.
                </li>
                <li>
                  The build creates an artifact that's used by the
                  rest of your pipeline to run tasks such as deploying to
                  staging or production.
                </li>
                <li>
                  Your code is now updated, built, tested, and
                  packaged. It can be deployed to any target.
                </li>
            </ol>
            Instructions to create a CI/CD pipeline using Azure Pipelines
        </li>

      <li>
        <span class="hilight">
            Azure Repos
        </span>
        <br />
        Repos provides cloud hosted private Git repos accessible
        through IDEs, web interfaces and any Git client. It
        supports web hooks and API integration using REST
        protocols. Repos also provides users with the ability to
        search code semantically. This enables searching through
        the means of  variables, and classes. CI/CD pipelines can
        be set to build on code changes and using branch policies,
        builds can be checked for quality automatically.
        <br />
        <br />
        Azure Repos offers cloud-hosted private and public Git repos.
        It offers collaborative code reviews to improve the quality
        of the code and increase the knowledge of the code base
        across the team. Azure Repos also allows you to manage
        access to the code repositories. It is possible to assign
        granular permissions to users and groups. Azure Repos
        provides semantic code search which is a code-aware search
        that understands classes and variables.
      </li>

      <li>
          <span class="hilight">
              Azure Test Plans
          </span>
          <br />
          Test Plans allows users to design and execute plans for
          manual and exploratory testing of software before being
          pushed to production The platform allows testing across
          web and desktop apps. Through the testing process, it
          collects rich scenario data to enable easier diagnosis of
          issues.
          <br />
          <br />
          Azure Test Plans provide browser-based planned manual and
          exploratory testing solutions. Kanban boards are used to
          add, view, interact with test cases and progressively
          monitor the status. Azure Test Plans also let you organize
          tests into test plans and test suites. The test suites can
          be dynamic or static. Runners can be used to test apps on
          any platform. The bugs filed during the process will
          include the diagnostic data automatically.
      </li>

      <li>
          <span class="hilight">
              Azure DevOps tool integrations
          </span>
          <br />
          Azure provides integration with popular open source and
          third-party tools and services—across the entire DevOps
          workflow. Spend less time integrating and more time
          delivering higher-quality software, faster.Use Visual
          Studio Team Services or deploy directly to Azure
          infrastructure from your favorite continuous integration
          and continuous delivery tools, such as Jenkins. In
          addition to using Azure Resource Manager for
          infrastructure as code, you can provision and manage Azure
          infrastructure directly from your favorite third-party
          tools, such as Ansible, Chef, Puppet, and Terraform. Azure
          services, third-party DevOps tools, and related products
          all work together to help meet the most common business
          needs and scenarios—including yours. Get started quickly
          with Azure DevOps solutions that give you access to
          architectures, tutorials, documentation, examples,
          templates, partners, and other resources.[2]
      </li>

      <li>
          <span class="hilight">
              Azure Devops Project
          </span>
          <br />
          Devops Project presents a simplified experience for
          deploying existing code from a Git repository and create a
          CI/CD pipeline. With a varied support for different
          programming languages and git repositories, it also
          provides direct integration with services like Azure
          Virtual Machines, Azure SQL, Azure Container Service and
          Kubernetes, and Azure Fabric. Tutorials for various
          programming languages are available
          <a href="https://docs.microsoft.com/en-us/azure/devops-project/"
          target="_blank" style="text-decoration: underline">here</a>
      </li>

      <li>
          <span class="hilight">
              Azure Monitoring Service
          </span>
          <br />
          Monitoring Service lies outside the Devops platform but provides
          useful insights about the project by collecting, analyzing and
          acting on the telemetry collected from cloud and on-premise
          environments. It helps users better understand the health of the
          environments and the dependencies their projects contain. <br /> The
          service collects metrics in real-time and logs from Azure platform,
          Guest OS and also from the application.
          <br />
          More information about the full suite of Azure Monitor service  can
          be found <a
          href="https://docs.microsoft.com/en-us/azure/azure-monitor/overview"
          target="_blank" style="text-decoration: underline">here</a>
      </li>

  </ol>

  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;References</p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;[1]
    <a href="https://docs.microsoft.com/en-us/rest/api/dtl/"
    target="_blank" style="text-decoration: underline">
    https://docs.microsoft.com/en-us/rest/api/dtl/</a>
  </p>
  <br/>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;[2]
    <a href="https://azure.microsoft.com/en-us/products/devops-tool-integrations/"
    target="_blank" style="text-decoration: underline">
    https://azure.microsoft.com/en-us/products/devops-tool-integrations/</a>
  </p>
  <p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
    &nbsp;[3]
    <a
    href="https://docs.microsoft.com/en-us/azure/devops/pipelines/get-started/pipelines-get-started?view=azure-devops/"
    target="_blank" style="text-decoration: underline">
    https://docs.microsoft.com/en-us/azure/devops/pipelines/get-started/
    pipelines-get-started?view=azure-devops/</a>
  </p>

</details>

<details>
    <summary class="sum1">
        Azure Docker Deployment
    </summary>
    <p>
        Different ways of deploying docker to Azure are discussed here:
    </p>
    <ol class="nested">
        <li>
            <span class="hilight">
                Azure Container Registry
            </span>
            <br />
            An Azure container registry is a private Docker registry
            in Azure where you can store and manage your private
            Docker container images.
            <br />
            <a
            href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-get-started-portal"
            target="_blank" style="text-decoration: underline"> Steps to
            create Azure Container Registry using Portal </a>
            <br />
            <a
            href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-get-started-azure-cli"
            target="_blank" style="text-decoration: underline">
                Steps to create Azure Container Registry using CLI
            </a>
            &nbsp;&nbsp;(Instructions to install the CLI binary can be found
             <a href="https://docs.microsoft.com/en-us/cli/azure/install-azure-cli?view=azure-cli-latest" target="_blank" style="text-decoration: underline">here</a>)
            <br />
            <br />
            You can configure webhooks for your container registry that
            generate events when certain actions are performed against it. For
            example, enable webhooks that are triggered when a container image
            is pushed to a registry, or deleted. When a webhook is triggered,
            Azure Container Registry issues an HTTP or HTTPS request
            containing information about the event to an endpoint you specify.
            Your endpoint can then process the webhook and act accordingly.
            The following links detail the schema of webhook requests
            generated by supported events and how to use the webhooks.
            <br />
            <a href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-webhook-reference"
            target="_blank" style="text-decoration: underline">
                Webhook Request Schema
            </a>
            <br />
            <a href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-webhook"
            target="_blank" style="text-decoration: underline">
                Using Webhooks
            </a>
            <br/>
            <br/>
            Azure Event Grid<br /> Azure Event Grid is a fully managed event
            routing service that provides uniform event consumption using a
            publish-subscribe model. You can use the Azure CLI to create a
            container registry, subscribe to registry events, then deploy a
            sample web application to receive the events. Finally, you trigger
            container image push and delete events and view the event payload
            in the sample application.
            <br/>
            <a href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-event-grid-quickstart"
            target="_blank" style="text-decoration: underline">
               More Information on Azure Event Grid
            </a>
            <br/>
            <a href="https://docs.microsoft.com/en-us/azure/event-grid/event-schema-container-registry"
            target="_blank" style="text-decoration: underline">
              Azure Event Grid event schema
            </a>
            <br/>
            <br/>
            Build and test container images with ACR Tasks in four ways:
            <br/>
            <ul class="inner_nested">
                <li>
                    <a>Quick task</a>: Build and push container images
                    on-demand, in Azure, without needing a local Docker Engine
                    installation. Think <code>docker build</code>,
                    <code>docker push</code> in the cloud. Build from local
                    source code or a Git repository.
                </li>
                <li>
                    <a >Build on source code commit</a>: Trigger a container
                    image build automatically when code is committed to a Git
                    repository.
                </li>

                <li>
                    <a >Build on base image update</a>: Trigger a container
                    image build  when that image's base image has been
                    updated.
                </li>
                <li><a >Multi-step
                tasks</a> (preview): Define multi-step tasks that build
                images, run containers as commands, and push images to a
                registry. This preview feature of ACR Tasks supports
                on-demand task execution and parallel image build, test, and
                push operations.
            </li>
        </ul>
        <br/>
        <a href="https://docs.microsoft.com/en-us/azure/container-registry/container-registry-tutorial-quick-task"
        target="_blank" style="text-decoration: underline">
          Creating ACR Task to Build and Deploy containers using CLI
        </a>
    </li>

    <li>
        <span class="hilight">
            Connecting Dockerhub with external service
        </span>
        <br />
        A docker hub repository can be configured via webhooks to make it an
        event driven service. As soon as any changes are made to the
        repository, the URL will be called.
        <br />
        <img src="../static/devops/dockerhubwebhook.png" style="width:60%;">
        <br/>
        <br/>
        <ul class="inner_nested">
            <li>
                Connecting dockerhub to AWS
                <ul class="inner_nested">
                    <li>
                        Create a lambda function
                        <br/>
                        <img src="../static/devops/lambda.png" style="width:80%;">
                    </li>
                    <li>
                        Create an API Gateway.Make a post method in the API
                        Gateway
                    </li>
                    <li>
                        Link the post method to the lambda functions
                        <br/>
                        <img src="../static/devops/apiGateway.png" style="width:80%;">
                    </li>
                    <li>
                        Deploy the API gateway and save the generated URL
                        <br/>
                        <img src="../static/devops/apiGatewayURL.png" style="width:80%;">
                    </li>
                    <li>
                        Now open Dockerhub repository and paste the URL in the
                        webhook section.
                        <br/>
                        <img src="../static/devops/dockerhubAWSwebhook.png" style="width:80%;">
                    </li>
                    <li>
                        Any changes to the dockerhub repo will now be reported
                        to the AWS Lambda function.Below is the log that gets
                        generated in AWS when a push was made to the dockerhub
                        repo
                        <br/>
                        <img src="../static/devops/awsLogs.png" style="width:80%;">
                    </li>
                </ul>
            </li>

            <li>
                Creating ECS (Elastic container service)
                <ul class="inner_nested">
                    <li>
                      Go to ECS from menu and click on create Cluster
                      <br/>
                      <img src="../static/devops/createCluster.png" style="width:80%;">
                    </li>
                    <li>
                      Select EC2 with networking
                      <br/>
                      <img src="../static/devops/ec2Networking.png" style="width:80%;">
                    </li>
                    <li>
                      Make sure you select a completely new VPC, Security
                      group and IAM role and create.
                      <br/>
                    </li>
                </ul>
            </li>

            <li>
                Creating Tasks to run on ECS
                <ul class="inner_nested">
                    <li>
                      Click on task definition and create tasks with specific
                      docker and settings.
                      <br/>
                    </li>
                </ul>
            </li>

            <li>
                Connecting lambda to ECS
                <ul class="inner_nested">
                    <li>
                      write code to access the cluster and specific Tasks
                      <br/>
                      <img src="../static/devops/lamdaECSConect.png" style="width:80%;">
                    </li>
                </ul>
            </li>

            <li>
                Connecting dockerhub to Microsoft Azure (one-time)
                <ul class="inner_nested">
                    <li>
                        Create a new container instance <br/> Container
                        instances can be used to deploy serverless Docker
                        instances. The option is accessible through the Azure
                        Portal by clicking on 'Create a new resource' -&gt
                        searching for 'Container Instances' -&gt and clicking
                        'Create'
                    </li>
                    <li>

                        Define container properties
                        <br />
                        (Basics) We define properties like 'Container Name',
                        'Container Image' containing the Docker Tag or URI,
                        'Resource Group' for resource and policy management
                        and 'Location' for the server.
                        <br />
                        <br />
                        (Configuration) Attributes
                        like 'OS Type', cores, memory  and other
                        infrastructure details can be defined at this step
                        <br />
                        <br />
                        (Summary) The configuration will be
                        printed once for the user to review and Azure will
                        begin provisioning infrastructure

                    </li>
                </ul>
            </li>
            <li>
                Connecting dockerhub to Azure functions
                <ul class="inner_nested">
                    <li>
                        Create a Azure function
                        <br/>
                        <img src="../static/devops/azureFunctions.png" style="width:80%;">
                    </li>
                    <li>
                        Create an HTTP interface to access the function
                        <br/>
                        <img src="../static/devops/azureAPI.png" style="width:80%;">
                    </li>
                    <li>
                        Enable POST method on the function
                    </li>
                    <li>
                        Get the function URL
                        <br/>
                        <img src="../static/devops/azureFunctionURL1.png" style="width:80%;">
                        <br/>
                        <br/>
                        <img src="../static/devops/azureFunctionURL2.png" style="width:80%;">
                    </li>
                    <li>
                        Now open Dockerhub repository and paste the URL in the
                        webhook section.
                        <br/>
                        <img src="../static/devops/dockerhubAzurewebhook.png" style="width:80%;">
                    </li>
                    <li>
                        Any changes to the dockerhub repo will now be reported
                        to the Azure.Below is the log that gets generated in
                        Azure functions when a push was made to the dockerhub
                        repo
                        <br/>
                        <img src="../static/devops/azureLogs.png" style="width:80%;">
                    </li>
                </ul>
            </li>
            <li>
              Deploying via Web App for Containers using Dockerhub (Continuous
              Deployment)
              <ul class="inner_nested">
                  <li>
                    Creating a web app
                    <ol class="inner_nested">
                        <li>
                            Go to <a href="https://portal.azure.com" target="_blank"
                            style="text-decoration:
                            underline">portal.azure.com</a>
                        </li>
                        <li>
                            Click on "Create a resource"
                        </li>
                        <li>
                            Search the Marketplace for "Web App for
                            Containers"
                        </li>
                        <li>
                            Click on "Create" button when Azure displays the
                            page for this service
                        </li>
                        <li>
                            Provide details like "App Name", "Subscription"
                            (billing), "Resource Group" (create a new group if
                            one doesn't exist), "OS" and "App
                            Service/Location"
                        </li>
                        <li>
                            Click the option of "Configure Container" for
                            defining the image source. Select "Docker Hub" to
                            be the source and provide repository details like
                            access type, image and tag information, and <a
                            href="https://docs.microsoft.com/en-us/azure/app-service/containers/app-service-linux-faq#built-in-images"
                            style="text-decoration: underline">"Startup
                            File"</a>
                        </li>
                        <li>
                            Click on "Apply" and then "Create" on the web app
                            settings menu. Azure will run validation tests and
                            begin deployment. Deployments can be monitored
                            from the notification button in the top.
                        </li>
                    </ol>
                </li>
                <li>
                    Turning on Continuous Deployment
                    <ol class="inner_nested">
                        <li>
                            Go to "App Service" from the Azure Portal
                        </li>
                        <li>
                            Select the application for which you wish to turn
                            on Continuous Deployment
                        </li>
                        <li>
                            Click on "Container Settings" and in the next
                            window, turn on "Continuous Deployment"<br /> <img
                            src="../static/devops/cont_deployment_webapp.png"
                            style="width:80%;">
                        </li>
                    </ol>
                </li>
                <li>
                    (Example) Deploying a Class Scheduling application
                    <figure>
                        <iframe width="560" height="315" src="https://www.youtube.com/embed/rL6pkSoSIJc" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </figure>
                </li>
            </ul>
          </li>
        </ul>
    </li>
    <li>
        <span class="hilight">
            Launching an Azure Web App for Containers
        </span>
        <br />
        Using Azure Pipelines it is possible to set up continuous
        deployment of a Docker enabled Azure Web Apps. Make the
        changes to your code, commit and push them, and it should
        automatically be built and deployed.
        <br />
        <br />
        To get started, first create an Azure Container Registry(ACR).
        The ACR will be used for storing your images including
        authentication, encryption and tagging.You will need to provide
        the registry name, subscription, resource group, location of where
        the registry will be located in Azure, and the SKU.
        <br />
        <br />
        <img src="../static/devops/azure-acr.png" style="width:50%;">
        <br />
        <br />
        <img src="../static/devops/azure-acr-details.png" style="width:50%;">
        <br />
        <br />
        <ul class="inner_nested">
        <li>
            Build and Push the images
            <br />
            <ol class="inner_nested">
                <li>
                    Get the access keys for the container registry created in the
                    previous step
                    <br />
                    <img src="../static/devops/azure-access-key.jpg" style="width:50%;">
                </li>
                <br />
                <li>Using the access key, login to the ACR
                    <br />
                    <br />
                    <img src="../static/devops/docker_login.png" style="width:50%;">
                </li>
                <li>Navigate to the directory with the code repository and create
                    the Docker image <br />
                    <br />
                    <img src="../static/devops/docker_build.png" style="width:50%;">
                </li>
                <li>Push the image to ACR
                    <br />
                    <br />
                    <img src="../static/devops/docker_push.png" style="width:50%;">
                    <br />
                    <br />
                    The container should be added to the registry. To confirm use
                    the <code>docker images</code> command.
                    <br />
                    <br />
                    <img src="../static/devops/docker_images.png" style="width:50%;">
                </li>
            </ol>
        </li>
        <li>
            Create Web App for Container Service
            <br />
            Create the resource <code> Web App for Containers</code>.
            It allows you to deploy the container to production. You
            will need to provide the App name, Subscription, Resource
            Group, the OS, and the Container. It will take the
            container and provide the necessities like the Domain Name
            and SSL/TLS Encryption.
            <br />
            <br />
            <img src="../static/devops/azure-web-apps.png" style="width:50%;">
            <br />
            <br />
            <img src="../static/devops/azure-web-app-details.png" style="width:50%;">
            <br />
            <br />
            When you click <code> Create</code>, the process of
            deploying the application begins. The Azure Web App
            Service will deploy all of the requirements like the
            hostname, SSL and firewall.
        </li>
        </ul>
    </li>
    <li>
        <span class="hilight">
            CI/CD with Azure Pipelines
        </span>
        <ol class="inner_nested">
            <li>
                Select Pipelines -&gt New -&gt New build pipeline on the Azure
                 Devops page.
            </li>
            <li>
                Select the location of source code and the desired repository.
            </li>
            <li>
                If the repository has a contains the <code>azure-pipelines.yml
                </code> file, then you'll see a Run button. If not, you'll be
                 asked to pick a starter template. Select Save and Run, then
                 select commit directly to the master branch, and then select
                 Save and Run again.
            </li>
        </ol>
    </li>
</ol>
</details>

<details>
    <summary class="sum1">
        Other Readings
    </summary>

    <ul class="nested">
        <li>
            <a href="https://en.wikipedia.org/wiki/Microsoft_Visual_Studio#Azure_DevOps">
                Azure DevOps
            </a>
        </li>

        <li>
            <a href="https://azure.microsoft.com/en-us/blog/introducing-azure-devops/">
                Introducing Azure DevOps
            </a>
        </li>

        <li>
            <a href="http://www.thedevopscourse.com/devops/suite">
                Microsoft Azure DevOps: What You Need to Know
            </a>
        </li>

        <li>
            <a href="https://www.meetup.com/Azure-NY/">
                Azure Lounge
            </a>
        </li>

        <li>
            <a href="https://azuremarketplace.microsoft.com/en-us/marketplace/apps/docker.dockerdatacenter?tab=Overview">
                Docker Enterprise for Azure
            </a>
        </li>

        <li>
            <a href="https://docs.microsoft.com/en-us/azure/devops/pipelines/apps/cd/deploy-docker-webapp?view=azure-devops">
                Deploy to an Azure Web App for Containers
            </a>
        </li>

        <li>
            <a href="https://docs.microsoft.com/en-us/azure/app-service/containers/quickstart-multi-container">
                Multi-Container app using Docker Compose
            </a>
        </li>

    </ul>

</details>

{% include 'quiz.html' %}

{% endblock content %}
