[{"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Infrastructure as CodeInfrastructure as code and Docker Lesson 1: What Is Infrastructure as Code?"}, "title": "code"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Infrastructure as code: What is it?"}, "title": "code"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Infrastructure as code (IaC) as the idea that, rather than manually provisioning servers, or setting up hardware through a point-and-click GUI, the \"server room\" should itself be managed by code."}, "title": "code"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "That code can then be put under version control, tested, deployed with automated build tools, and so on."}, "title": "code"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The code also serves as necessarily up-to-date documentation of what the infrastructure is."}, "title": "code"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Furthermore, as code, the infrastructure can be read and reasoned about."}, "title": "code"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Download website codeOk now that you have download the nginx image, let's download the static website that you are going to host inside the docker container."}, "title": "code"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "You can find the code for the website here."}, "title": "code"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Let's make a containerOk, so we have downloaded the nginx image and the code of the website which we want to host All we need to do is just make a container out of the image."}, "title": "code"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "We will put the code of website inside the container so that the webserver which is nginx in our case can read the html files and host it in local server."}, "title": "code"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "This is infrastructure as code, since the infrastructure for the project is built from these files of code."}, "title": "code"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "That code can then be put under version control, tested, deployed with automated build tools, and so on."}, "title": "test"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "For example in Prashant's system it looks something like this:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    In the above listing, the nginx image is not installed."}, "title": "test"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker pull nginxNow that you have installed the nginx image, just run the docker images command again, in the list you should see ngnix image as below:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    nginx                 latest              71c43202b8ac        7 hours ago         109MB    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    (You can put an image into DockerHub using docker push.)"}, "title": "test"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Ultimately, we should be deploying the container where we locally test our web servers right into production, guaranteeing that development and production are identical environments."}, "title": "test"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Let's make a containerOk, so we have downloaded the nginx image and the code of the website which we want to host All we need to do is just make a container out of the image."}, "title": "make"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "To provide our full suite of development tools, such as the correct Python version, make, flake8, various Python libraries, etc., in one simple to build package, so all developer's have a consistent environment."}, "title": "make"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Each project we work on should have a Dockerfile consisting of instructions on how to build the image for that project, a requirements.txt listing what external modules need to be included in the image, and a line in the project's makefile automating the build of the image."}, "title": "make"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "So, in the makefile we want something like:container: $(DOCKER_DIR)/Dockerfile $(DOCKER_DIR)/requirements.txt         docker build -t indra dockerHere is a sample Dockerfile."}, "title": "make"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "(Source: Wikipedia on Infrastructure as Code )A DevOps principle: Asking people to behave like automatons bores and dehumanizes them."}, "title": "like"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "For example in Prashant's system it looks something like this:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    In the above listing, the nginx image is not installed."}, "title": "like"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Running the following command will pull the nginx image from DockerHub, which is like GitHub, but for docker images."}, "title": "like"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our Docker ImplementationWe use Docker in our projects for two main reasons, with a third to come:To set up a local version of a web server that will be configured \"just like\" our production server."}, "title": "like"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "(\"Just like\" is in quotes because that is always the ideal, but it may not be fully achieved.)"}, "title": "like"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "So, in the makefile we want something like:container: $(DOCKER_DIR)/Dockerfile $(DOCKER_DIR)/requirements.txt         docker build -t indra dockerHere is a sample Dockerfile."}, "title": "like"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Lower error rates: It is error-prone, because it is boring, too configure systems \"by hand.\""}, "title": "one"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Furthermore, as code, the infrastructure can be read and reasoned about."}, "title": "one"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Secondly: Please clone (if you have not already) our online DevOps repo: git clone https://github.com/gcallah/OnlineDevops.gitOnce you have cloned that repo, please open two shells: in one, we will look at your local environment, and in the other we will explore the container."}, "title": "one"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In one of the two shells, in your OnlineDevops directory, please run: ./container.sh That should put you inside the OnlineDevops container: if that command worked, you should see your prompt change."}, "title": "one"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Please remember the location where you have cloned the repository."}, "title": "one"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Prashant has cloned it in /Users/prashant/school/algorithms."}, "title": "one"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "To provide our full suite of development tools, such as the correct Python version, make, flake8, various Python libraries, etc., in one simple to build package, so all developer's have a consistent environment."}, "title": "one"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our More Advanced Docker UsageIn the Online DevOps course project, we use a more advanced Docker setup: we employ Docker Compose to define and run an application composed of more than one Docker container."}, "title": "one"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In the Online DevOps course setup, we are running just two containers: one to run the MySQL database, and the other to run our Django web server."}, "title": "one"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In one of the two shells, in your OnlineDevops directory, please run: ./container.sh That should put you inside the OnlineDevops container: if that command worked, you should see your prompt change."}, "title": "change"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker run --name algo_website -p 127.0.0.1:8080:80 -v /Users/prashant/school/algos/:/usr/share/nginx/html -d nginxPlease don't forget to change the location of algorithms directory in above command."}, "title": "change"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "It has its own process namespace separate from its host's namespace and from the namespace of any other containers running on that host."}, "title": "names"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The separate namespace also provides the container with its own hostname, its own user IDs, and its own inter-process communication names."}, "title": "names"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In the Online DevOps course setup, we are running just two containers: one to run the MySQL database, and the other to run our Django web server."}, "title": "data"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "But other Docker Compose setups might include a web server, a load balancer, a database, an authentication server, and more!"}, "title": "data"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "But other Docker Compose setups might include a web server, a load balancer, a database, an authentication server, and more!"}, "title": "might"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Lower error rates: It is error-prone, because it is boring, too configure systems \"by hand.\""}, "title": "system"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "First of all, let's look at the root file system, inside and outside the container:Outside the container: ls /     Macintosh:OnlineDevops gcallah$ ls /    Applications            bin                net    Library                cores                opt    Network                debug.txt            private    Shockwave Log            debug.txt.1            sbin    System                dev                tmp    User Guides And Information    etc                usr    User Information        home                var    Users                installer.failurerequests    Volumes                logFile.xsl                    Inside the container: ls /     root@a5dd222a9812:/home/DevOps# ls /    bin   dev  home  lib64    mnt  proc           root  sbin  sys    usr    boot  etc  lib     media    opt  requirements.txt  run   srv   tmp    var                    What's of note here: From outside and from inside the container, we see completely different file systems!"}, "title": "system"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Inside the container, we are in a chroot file system."}, "title": "system"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker ps -a This will list all images that have been run on the system, not just those that are active:     Macintosh:OnlineDevops gcallah$ docker ps -a    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS                    NAMES    c560c3729d7e        devops              \"bash\"              18 minutes ago    Up 18 minutes                    0.0.0.0:8000->8000/tcp   brave_kirch    429ff1a37d21        devops              \"bash\"              About an hour ago   Exited (130) 44 minutes ago                               stupefied_swanson    32b272487675        devops              \"bash\"              5 days ago          Created                                                   wonderful_heyrovsky    a5dd222a9812        devops              \"bash\"              10 days ago         Exited (130) About an hour ago                            naughty_beaver    e82e4fb65823        devops              \"bash\"              11 days ago         Exited (130) 11 days ago                                  youthful_noyce    0433f774c394        devops              \"bash\"              11 days ago         Created                                                   stupefied_hawking    1ba39e023554        devops              \"bash\"              11 days ago         Created                                                   practical_ptolemy    4a6bc8cf7ab0        devops              \"bash\"              11 days ago         Created                                                   vigilant_curie    47cb14ca5b1b        devops              \"bash\"              2 weeks ago    Exited (255) 11 days ago         0.0.0.0:8000->8000/tcp   determined_goldwasser    7af5f14f88d9        f418f33054e8        \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  modest_hypatia    e3292cdc1449        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  competent_hugle    3ad630752ebf        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  amazing_meitner    fe439d8e15c2        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks a                        docker imagesThis command should give you the list of images that are available on the system."}, "title": "system"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "For example in Prashant's system it looks something like this:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    In the above listing, the nginx image is not installed."}, "title": "system"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "For example in Prashant's system it looks something like this:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    In the above listing, the nginx image is not installed."}, "title": "db"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker pull nginxNow that you have installed the nginx image, just run the docker images command again, in the list you should see ngnix image as below:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    nginx                 latest              71c43202b8ac        7 hours ago         109MB    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    (You can put an image into DockerHub using docker push.)"}, "title": "db"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "You won't get any further in following along on your laptop if you do not."}, "title": "n't"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker run --name algo_website -p 127.0.0.1:8080:80 -v /Users/prashant/school/algos/:/usr/share/nginx/html -d nginxPlease don't forget to change the location of algorithms directory in above command."}, "title": "n't"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Asking them to devise clever ways to automate things interests them, and treats them as the rational beings that they are!"}, "title": "way"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "(\"Just like\" is in quotes because that is always the ideal, but it may not be fully achieved.)"}, "title": "way"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "For example in Prashant's system it looks something like this:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    In the above listing, the nginx image is not installed."}, "title": "python"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker pull nginxNow that you have installed the nginx image, just run the docker images command again, in the list you should see ngnix image as below:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    nginx                 latest              71c43202b8ac        7 hours ago         109MB    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    (You can put an image into DockerHub using docker push.)"}, "title": "python"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The FROM python:3.6.0 command says what base image to build our image from."}, "title": "python"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Unfortunately, at the moment, the places we are hosting do not support that."}, "title": "place"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Let's make a containerOk, so we have downloaded the nginx image and the code of the website which we want to host All we need to do is just make a container out of the image."}, "title": "need"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "If we need to remove a container that is still running, we will have to stop it first with docker stop."}, "title": "need"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "So we need to know how to create the right container for each project."}, "title": "need"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Each project we work on should have a Dockerfile consisting of instructions on how to build the image for that project, a requirements.txt listing what external modules need to be included in the image, and a line in the project's makefile automating the build of the image."}, "title": "need"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Aristotle: humans are rational animals."}, "title": "humans"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our More Advanced Docker UsageIn the Online DevOps course project, we use a more advanced Docker setup: we employ Docker Compose to define and run an application composed of more than one Docker container."}, "title": "define"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "If it did, let's explore the shells you are in a little to try to understand better what a container is."}, "title": "understand"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The code also serves as necessarily up-to-date documentation of what the infrastructure is."}, "title": "also"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The separate namespace also provides the container with its own hostname, its own user IDs, and its own inter-process communication names."}, "title": "also"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The advantages of IaC can be divided into three main categories:Cost savings: By automating hardware provisioning, the time of the people who would have been doing that by hand is freed up for other tasks."}, "title": "go"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "I am going to proceed by showing you the results of running the same command inside and outside the container on my machine: your results will be different, but similar, to mine."}, "title": "go"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "When Prof. Callahan runs it while preparing this lecture, he sees:     Macintosh:OnlineDevops gcallah$ docker ps    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                     NAMES    429ff1a37d21        devops              \"bash\"              11 seconds ago    Up 6 seconds        0.0.0.0:32768->8000/tcp   stupefied_swanson                    (The 0.0.0.0 is the IP address to use for the container, and 32768 is the port it is using.)"}, "title": "go"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker ps -a This will list all images that have been run on the system, not just those that are active:     Macintosh:OnlineDevops gcallah$ docker ps -a    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS                    NAMES    c560c3729d7e        devops              \"bash\"              18 minutes ago    Up 18 minutes                    0.0.0.0:8000->8000/tcp   brave_kirch    429ff1a37d21        devops              \"bash\"              About an hour ago   Exited (130) 44 minutes ago                               stupefied_swanson    32b272487675        devops              \"bash\"              5 days ago          Created                                                   wonderful_heyrovsky    a5dd222a9812        devops              \"bash\"              10 days ago         Exited (130) About an hour ago                            naughty_beaver    e82e4fb65823        devops              \"bash\"              11 days ago         Exited (130) 11 days ago                                  youthful_noyce    0433f774c394        devops              \"bash\"              11 days ago         Created                                                   stupefied_hawking    1ba39e023554        devops              \"bash\"              11 days ago         Created                                                   practical_ptolemy    4a6bc8cf7ab0        devops              \"bash\"              11 days ago         Created                                                   vigilant_curie    47cb14ca5b1b        devops              \"bash\"              2 weeks ago    Exited (255) 11 days ago         0.0.0.0:8000->8000/tcp   determined_goldwasser    7af5f14f88d9        f418f33054e8        \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  modest_hypatia    e3292cdc1449        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  competent_hugle    3ad630752ebf        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  amazing_meitner    fe439d8e15c2        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks a                        docker imagesThis command should give you the list of images that are available on the system."}, "title": "go"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "For example in Prashant's system it looks something like this:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    In the above listing, the nginx image is not installed."}, "title": "go"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker pull nginxNow that you have installed the nginx image, just run the docker images command again, in the list you should see ngnix image as below:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    nginx                 latest              71c43202b8ac        7 hours ago         109MB    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    (You can put an image into DockerHub using docker push.)"}, "title": "go"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Download website codeOk now that you have download the nginx image, let's download the static website that you are going to host inside the docker container."}, "title": "go"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "We are going to use the algorithms website for another course."}, "title": "go"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Prashant has cloned it in /Users/prashant/school/algorithms."}, "title": "go"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker run --name algo_website -p 127.0.0.1:8080:80 -v /Users/prashant/school/algos/:/usr/share/nginx/html -d nginxPlease don't forget to change the location of algorithms directory in above command."}, "title": "go"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "After we leave the container, we can get rid of it using docker rm algo_website."}, "title": "go"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In the Online DevOps course setup, we are running just two containers: one to run the MySQL database, and the other to run our Django web server."}, "title": "go"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The line RUN pip install -r requirements.txt installs everything from the requirements file in the container."}, "title": "every"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Asking them to devise clever ways to automate things interests them, and treats them as the rational beings that they are!"}, "title": "ever"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The line RUN pip install -r requirements.txt installs everything from the requirements file in the container."}, "title": "ever"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The advantages of IaC can be divided into three main categories:Cost savings: By automating hardware provisioning, the time of the people who would have been doing that by hand is freed up for other tasks."}, "title": "would"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "When Prof. Callahan runs it while preparing this lecture, he sees:     Macintosh:OnlineDevops gcallah$ docker ps    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                     NAMES    429ff1a37d21        devops              \"bash\"              11 seconds ago    Up 6 seconds        0.0.0.0:32768->8000/tcp   stupefied_swanson                    (The 0.0.0.0 is the IP address to use for the container, and 32768 is the port it is using.)"}, "title": "devops"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker ps -a This will list all images that have been run on the system, not just those that are active:     Macintosh:OnlineDevops gcallah$ docker ps -a    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS                    NAMES    c560c3729d7e        devops              \"bash\"              18 minutes ago    Up 18 minutes                    0.0.0.0:8000->8000/tcp   brave_kirch    429ff1a37d21        devops              \"bash\"              About an hour ago   Exited (130) 44 minutes ago                               stupefied_swanson    32b272487675        devops              \"bash\"              5 days ago          Created                                                   wonderful_heyrovsky    a5dd222a9812        devops              \"bash\"              10 days ago         Exited (130) About an hour ago                            naughty_beaver    e82e4fb65823        devops              \"bash\"              11 days ago         Exited (130) 11 days ago                                  youthful_noyce    0433f774c394        devops              \"bash\"              11 days ago         Created                                                   stupefied_hawking    1ba39e023554        devops              \"bash\"              11 days ago         Created                                                   practical_ptolemy    4a6bc8cf7ab0        devops              \"bash\"              11 days ago         Created                                                   vigilant_curie    47cb14ca5b1b        devops              \"bash\"              2 weeks ago    Exited (255) 11 days ago         0.0.0.0:8000->8000/tcp   determined_goldwasser    7af5f14f88d9        f418f33054e8        \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  modest_hypatia    e3292cdc1449        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  competent_hugle    3ad630752ebf        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  amazing_meitner    fe439d8e15c2        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks a                        docker imagesThis command should give you the list of images that are available on the system."}, "title": "devops"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Secondly: Please clone (if you have not already) our online DevOps repo: git clone https://github.com/gcallah/OnlineDevops.gitOnce you have cloned that repo, please open two shells: in one, we will look at your local environment, and in the other we will explore the container."}, "title": "call"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "First of all, let's look at the root file system, inside and outside the container:Outside the container: ls /     Macintosh:OnlineDevops gcallah$ ls /    Applications            bin                net    Library                cores                opt    Network                debug.txt            private    Shockwave Log            debug.txt.1            sbin    System                dev                tmp    User Guides And Information    etc                usr    User Information        home                var    Users                installer.failurerequests    Volumes                logFile.xsl                    Inside the container: ls /     root@a5dd222a9812:/home/DevOps# ls /    bin   dev  home  lib64    mnt  proc           root  sbin  sys    usr    boot  etc  lib     media    opt  requirements.txt  run   srv   tmp    var                    What's of note here: From outside and from inside the container, we see completely different file systems!"}, "title": "call"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Outside the container we see: ps -ef | wc -l      Macintosh:OnlineDevops gcallah$ ps -ef | wc -l     667                    From outside the container, the OS lists 667 processes as running on my Mac."}, "title": "call"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "When Prof. Callahan runs it while preparing this lecture, he sees:     Macintosh:OnlineDevops gcallah$ docker ps    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                     NAMES    429ff1a37d21        devops              \"bash\"              11 seconds ago    Up 6 seconds        0.0.0.0:32768->8000/tcp   stupefied_swanson                    (The 0.0.0.0 is the IP address to use for the container, and 32768 is the port it is using.)"}, "title": "call"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker ps -a This will list all images that have been run on the system, not just those that are active:     Macintosh:OnlineDevops gcallah$ docker ps -a    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS                    NAMES    c560c3729d7e        devops              \"bash\"              18 minutes ago    Up 18 minutes                    0.0.0.0:8000->8000/tcp   brave_kirch    429ff1a37d21        devops              \"bash\"              About an hour ago   Exited (130) 44 minutes ago                               stupefied_swanson    32b272487675        devops              \"bash\"              5 days ago          Created                                                   wonderful_heyrovsky    a5dd222a9812        devops              \"bash\"              10 days ago         Exited (130) About an hour ago                            naughty_beaver    e82e4fb65823        devops              \"bash\"              11 days ago         Exited (130) 11 days ago                                  youthful_noyce    0433f774c394        devops              \"bash\"              11 days ago         Created                                                   stupefied_hawking    1ba39e023554        devops              \"bash\"              11 days ago         Created                                                   practical_ptolemy    4a6bc8cf7ab0        devops              \"bash\"              11 days ago         Created                                                   vigilant_curie    47cb14ca5b1b        devops              \"bash\"              2 weeks ago    Exited (255) 11 days ago         0.0.0.0:8000->8000/tcp   determined_goldwasser    7af5f14f88d9        f418f33054e8        \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  modest_hypatia    e3292cdc1449        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  competent_hugle    3ad630752ebf        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  amazing_meitner    fe439d8e15c2        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks a                        docker imagesThis command should give you the list of images that are available on the system."}, "title": "call"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "For example in Prashant's system it looks something like this:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    In the above listing, the nginx image is not installed."}, "title": "call"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker pull nginxNow that you have installed the nginx image, just run the docker images command again, in the list you should see ngnix image as below:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    nginx                 latest              71c43202b8ac        7 hours ago         109MB    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    (You can put an image into DockerHub using docker push.)"}, "title": "call"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Ultimately, we should be deploying the container where we locally test our web servers right into production, guaranteeing that development and production are identical environments."}, "title": "call"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker ps -a This will list all images that have been run on the system, not just those that are active:     Macintosh:OnlineDevops gcallah$ docker ps -a    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS                    NAMES    c560c3729d7e        devops              \"bash\"              18 minutes ago    Up 18 minutes                    0.0.0.0:8000->8000/tcp   brave_kirch    429ff1a37d21        devops              \"bash\"              About an hour ago   Exited (130) 44 minutes ago                               stupefied_swanson    32b272487675        devops              \"bash\"              5 days ago          Created                                                   wonderful_heyrovsky    a5dd222a9812        devops              \"bash\"              10 days ago         Exited (130) About an hour ago                            naughty_beaver    e82e4fb65823        devops              \"bash\"              11 days ago         Exited (130) 11 days ago                                  youthful_noyce    0433f774c394        devops              \"bash\"              11 days ago         Created                                                   stupefied_hawking    1ba39e023554        devops              \"bash\"              11 days ago         Created                                                   practical_ptolemy    4a6bc8cf7ab0        devops              \"bash\"              11 days ago         Created                                                   vigilant_curie    47cb14ca5b1b        devops              \"bash\"              2 weeks ago    Exited (255) 11 days ago         0.0.0.0:8000->8000/tcp   determined_goldwasser    7af5f14f88d9        f418f33054e8        \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  modest_hypatia    e3292cdc1449        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  competent_hugle    3ad630752ebf        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  amazing_meitner    fe439d8e15c2        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks a                        docker imagesThis command should give you the list of images that are available on the system."}, "title": "hour"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker pull nginxNow that you have installed the nginx image, just run the docker images command again, in the list you should see ngnix image as below:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    nginx                 latest              71c43202b8ac        7 hours ago         109MB    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    (You can put an image into DockerHub using docker push.)"}, "title": "hour"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "For example in Prashant's system it looks something like this:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    In the above listing, the nginx image is not installed."}, "title": "example"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "For example in Prashant's system it looks something like this:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    In the above listing, the nginx image is not installed."}, "title": "something"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "So, in the makefile we want something like:container: $(DOCKER_DIR)/Dockerfile $(DOCKER_DIR)/requirements.txt         docker build -t indra dockerHere is a sample Dockerfile."}, "title": "something"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Windows user should use the address http://0.0.0.0:8080 instead of localhost."}, "title": "instead"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Please remember the location where you have cloned the repository."}, "title": "remember"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "This is infrastructure as code, since the infrastructure for the project is built from these files of code."}, "title": "since"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Furthermore, as code, the infrastructure can be read and reasoned about."}, "title": "reason"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our Docker ImplementationWe use Docker in our projects for two main reasons, with a third to come:To set up a local version of a web server that will be configured \"just like\" our production server."}, "title": "reason"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Secondly: Please clone (if you have not already) our online DevOps repo: git clone https://github.com/gcallah/OnlineDevops.gitOnce you have cloned that repo, please open two shells: in one, we will look at your local environment, and in the other we will explore the container."}, "title": "please"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In one of the two shells, in your OnlineDevops directory, please run: ./container.sh That should put you inside the OnlineDevops container: if that command worked, you should see your prompt change."}, "title": "please"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Your location will be different than this, please note the location."}, "title": "please"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "I am going to proceed by showing you the results of running the same command inside and outside the container on my machine: your results will be different, but similar, to mine."}, "title": "different"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "First of all, let's look at the root file system, inside and outside the container:Outside the container: ls /     Macintosh:OnlineDevops gcallah$ ls /    Applications            bin                net    Library                cores                opt    Network                debug.txt            private    Shockwave Log            debug.txt.1            sbin    System                dev                tmp    User Guides And Information    etc                usr    User Information        home                var    Users                installer.failurerequests    Volumes                logFile.xsl                    Inside the container: ls /     root@a5dd222a9812:/home/DevOps# ls /    bin   dev  home  lib64    mnt  proc           root  sbin  sys    usr    boot  etc  lib     media    opt  requirements.txt  run   srv   tmp    var                    What's of note here: From outside and from inside the container, we see completely different file systems!"}, "title": "different"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Your location will be different than this, please note the location."}, "title": "different"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The advantages of IaC can be divided into three main categories:Cost savings: By automating hardware provisioning, the time of the people who would have been doing that by hand is freed up for other tasks."}, "title": "hand"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Lower error rates: It is error-prone, because it is boring, too configure systems \"by hand.\""}, "title": "hand"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In the Online DevOps course setup, we are running just two containers: one to run the MySQL database, and the other to run our Django web server."}, "title": "database"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "But other Docker Compose setups might include a web server, a load balancer, a database, an authentication server, and more!"}, "title": "database"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker ps -a This will list all images that have been run on the system, not just those that are active:     Macintosh:OnlineDevops gcallah$ docker ps -a    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS                    NAMES    c560c3729d7e        devops              \"bash\"              18 minutes ago    Up 18 minutes                    0.0.0.0:8000->8000/tcp   brave_kirch    429ff1a37d21        devops              \"bash\"              About an hour ago   Exited (130) 44 minutes ago                               stupefied_swanson    32b272487675        devops              \"bash\"              5 days ago          Created                                                   wonderful_heyrovsky    a5dd222a9812        devops              \"bash\"              10 days ago         Exited (130) About an hour ago                            naughty_beaver    e82e4fb65823        devops              \"bash\"              11 days ago         Exited (130) 11 days ago                                  youthful_noyce    0433f774c394        devops              \"bash\"              11 days ago         Created                                                   stupefied_hawking    1ba39e023554        devops              \"bash\"              11 days ago         Created                                                   practical_ptolemy    4a6bc8cf7ab0        devops              \"bash\"              11 days ago         Created                                                   vigilant_curie    47cb14ca5b1b        devops              \"bash\"              2 weeks ago    Exited (255) 11 days ago         0.0.0.0:8000->8000/tcp   determined_goldwasser    7af5f14f88d9        f418f33054e8        \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  modest_hypatia    e3292cdc1449        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  competent_hugle    3ad630752ebf        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  amazing_meitner    fe439d8e15c2        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks a                        docker imagesThis command should give you the list of images that are available on the system."}, "title": "mod"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Each project we work on should have a Dockerfile consisting of instructions on how to build the image for that project, a requirements.txt listing what external modules need to be included in the image, and a line in the project's makefile automating the build of the image."}, "title": "mod"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "If it did, let's explore the shells you are in a little to try to understand better what a container is."}, "title": "'s"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "First of all, let's look at the root file system, inside and outside the container:Outside the container: ls /     Macintosh:OnlineDevops gcallah$ ls /    Applications            bin                net    Library                cores                opt    Network                debug.txt            private    Shockwave Log            debug.txt.1            sbin    System                dev                tmp    User Guides And Information    etc                usr    User Information        home                var    Users                installer.failurerequests    Volumes                logFile.xsl                    Inside the container: ls /     root@a5dd222a9812:/home/DevOps# ls /    bin   dev  home  lib64    mnt  proc           root  sbin  sys    usr    boot  etc  lib     media    opt  requirements.txt  run   srv   tmp    var                    What's of note here: From outside and from inside the container, we see completely different file systems!"}, "title": "'s"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "It has its own process namespace separate from its host's namespace and from the namespace of any other containers running on that host."}, "title": "'s"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Some Docker commandsNow let's look at what some Docker commands are available, and what they do."}, "title": "'s"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "For example in Prashant's system it looks something like this:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    In the above listing, the nginx image is not installed."}, "title": "'s"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Download website codeOk now that you have download the nginx image, let's download the static website that you are going to host inside the docker container."}, "title": "'s"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Let's make a containerOk, so we have downloaded the nginx image and the code of the website which we want to host All we need to do is just make a container out of the image."}, "title": "'s"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "To provide our full suite of development tools, such as the correct Python version, make, flake8, various Python libraries, etc., in one simple to build package, so all developer's have a consistent environment."}, "title": "'s"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Each project we work on should have a Dockerfile consisting of instructions on how to build the image for that project, a requirements.txt listing what external modules need to be included in the image, and a line in the project's makefile automating the build of the image."}, "title": "'s"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Other ReadingsContainers are eating the worldInfrastructure automationA Behavior Driven Developer's guide to Infrastructure as Code"}, "title": "'s"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "We are going to use the algorithms website for another course."}, "title": "algorithm"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Prashant has cloned it in /Users/prashant/school/algorithms."}, "title": "algorithm"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker run --name algo_website -p 127.0.0.1:8080:80 -v /Users/prashant/school/algos/:/usr/share/nginx/html -d nginxPlease don't forget to change the location of algorithms directory in above command."}, "title": "algorithm"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "I am going to proceed by showing you the results of running the same command inside and outside the container on my machine: your results will be different, but similar, to mine."}, "title": "results"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "To provide our full suite of development tools, such as the correct Python version, make, flake8, various Python libraries, etc., in one simple to build package, so all developer's have a consistent environment."}, "title": "per"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Other ReadingsContainers are eating the worldInfrastructure automationA Behavior Driven Developer's guide to Infrastructure as Code"}, "title": "per"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Each project we work on should have a Dockerfile consisting of instructions on how to build the image for that project, a requirements.txt listing what external modules need to be included in the image, and a line in the project's makefile automating the build of the image."}, "title": "include"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "But other Docker Compose setups might include a web server, a load balancer, a database, an authentication server, and more!"}, "title": "include"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker run --name algo_website -p 127.0.0.1:8080:80 -v /Users/prashant/school/algos/:/usr/share/nginx/html -d nginxPlease don't forget to change the location of algorithms directory in above command."}, "title": "--"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "To provide our full suite of development tools, such as the correct Python version, make, flake8, various Python libraries, etc., in one simple to build package, so all developer's have a consistent environment."}, "title": "consistent"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "You won't get any further in following along on your laptop if you do not."}, "title": "follow"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Running the following command will pull the nginx image from DockerHub, which is like GitHub, but for docker images."}, "title": "follow"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker psThis will list your currently running Docker images."}, "title": "current"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "First of all, let's look at the root file system, inside and outside the container:Outside the container: ls /     Macintosh:OnlineDevops gcallah$ ls /    Applications            bin                net    Library                cores                opt    Network                debug.txt            private    Shockwave Log            debug.txt.1            sbin    System                dev                tmp    User Guides And Information    etc                usr    User Information        home                var    Users                installer.failurerequests    Volumes                logFile.xsl                    Inside the container: ls /     root@a5dd222a9812:/home/DevOps# ls /    bin   dev  home  lib64    mnt  proc           root  sbin  sys    usr    boot  etc  lib     media    opt  requirements.txt  run   srv   tmp    var                    What's of note here: From outside and from inside the container, we see completely different file systems!"}, "title": "completely"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our More Advanced Docker UsageIn the Online DevOps course project, we use a more advanced Docker setup: we employ Docker Compose to define and run an application composed of more than one Docker container."}, "title": "app"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Docker Compose use a YAML file to specify the configuration of a multi-container Docker app."}, "title": "app"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Here is the YAML file that specifies our two-container application."}, "title": "app"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Lower error rates: It is error-prone, because it is boring, too configure systems \"by hand.\""}, "title": "use"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The separate namespace also provides the container with its own hostname, its own user IDs, and its own inter-process communication names."}, "title": "use"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "When Prof. Callahan runs it while preparing this lecture, he sees:     Macintosh:OnlineDevops gcallah$ docker ps    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                     NAMES    429ff1a37d21        devops              \"bash\"              11 seconds ago    Up 6 seconds        0.0.0.0:32768->8000/tcp   stupefied_swanson                    (The 0.0.0.0 is the IP address to use for the container, and 32768 is the port it is using.)"}, "title": "use"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "We are going to use the algorithms website for another course."}, "title": "use"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Windows user should use the address http://0.0.0.0:8080 instead of localhost."}, "title": "use"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our Docker ImplementationWe use Docker in our projects for two main reasons, with a third to come:To set up a local version of a web server that will be configured \"just like\" our production server."}, "title": "use"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "(\"Just like\" is in quotes because that is always the ideal, but it may not be fully achieved.)"}, "title": "use"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The line ENV user_type TERMINAL sets an environment variable (user_type) that will be available inside the container."}, "title": "use"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Here is the requirements file it uses."}, "title": "use"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our More Advanced Docker UsageIn the Online DevOps course project, we use a more advanced Docker setup: we employ Docker Compose to define and run an application composed of more than one Docker container."}, "title": "use"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Docker Compose use a YAML file to specify the configuration of a multi-container Docker app."}, "title": "use"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "After you run the command open the browser and type http://localhost:8080 and you should be able to see the webpage."}, "title": "type"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The line ENV user_type TERMINAL sets an environment variable (user_type) that will be available inside the container."}, "title": "type"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "You won't get any further in following along on your laptop if you do not."}, "title": "following"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Running the following command will pull the nginx image from DockerHub, which is like GitHub, but for docker images."}, "title": "following"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "That code can then be put under version control, tested, deployed with automated build tools, and so on."}, "title": "control"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "You won't get any further in following along on your laptop if you do not."}, "title": "get"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker run --name algo_website -p 127.0.0.1:8080:80 -v /Users/prashant/school/algos/:/usr/share/nginx/html -d nginxPlease don't forget to change the location of algorithms directory in above command."}, "title": "get"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "After we leave the container, we can get rid of it using docker rm algo_website."}, "title": "get"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Speed of deployment: It is much faster to configure infrastructure by running a script than by manually setting a bunch of parameters in a GUI interface."}, "title": "parameter"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "For example in Prashant's system it looks something like this:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    In the above listing, the nginx image is not installed."}, "title": "django"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker pull nginxNow that you have installed the nginx image, just run the docker images command again, in the list you should see ngnix image as below:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    nginx                 latest              71c43202b8ac        7 hours ago         109MB    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    (You can put an image into DockerHub using docker push.)"}, "title": "django"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "If we need to remove a container that is still running, we will have to stop it first with docker stop."}, "title": "still"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker ps -a This will list all images that have been run on the system, not just those that are active:     Macintosh:OnlineDevops gcallah$ docker ps -a    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS                    NAMES    c560c3729d7e        devops              \"bash\"              18 minutes ago    Up 18 minutes                    0.0.0.0:8000->8000/tcp   brave_kirch    429ff1a37d21        devops              \"bash\"              About an hour ago   Exited (130) 44 minutes ago                               stupefied_swanson    32b272487675        devops              \"bash\"              5 days ago          Created                                                   wonderful_heyrovsky    a5dd222a9812        devops              \"bash\"              10 days ago         Exited (130) About an hour ago                            naughty_beaver    e82e4fb65823        devops              \"bash\"              11 days ago         Exited (130) 11 days ago                                  youthful_noyce    0433f774c394        devops              \"bash\"              11 days ago         Created                                                   stupefied_hawking    1ba39e023554        devops              \"bash\"              11 days ago         Created                                                   practical_ptolemy    4a6bc8cf7ab0        devops              \"bash\"              11 days ago         Created                                                   vigilant_curie    47cb14ca5b1b        devops              \"bash\"              2 weeks ago    Exited (255) 11 days ago         0.0.0.0:8000->8000/tcp   determined_goldwasser    7af5f14f88d9        f418f33054e8        \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  modest_hypatia    e3292cdc1449        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  competent_hugle    3ad630752ebf        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  amazing_meitner    fe439d8e15c2        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks a                        docker imagesThis command should give you the list of images that are available on the system."}, "title": "day"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker ps -a This will list all images that have been run on the system, not just those that are active:     Macintosh:OnlineDevops gcallah$ docker ps -a    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS                    NAMES    c560c3729d7e        devops              \"bash\"              18 minutes ago    Up 18 minutes                    0.0.0.0:8000->8000/tcp   brave_kirch    429ff1a37d21        devops              \"bash\"              About an hour ago   Exited (130) 44 minutes ago                               stupefied_swanson    32b272487675        devops              \"bash\"              5 days ago          Created                                                   wonderful_heyrovsky    a5dd222a9812        devops              \"bash\"              10 days ago         Exited (130) About an hour ago                            naughty_beaver    e82e4fb65823        devops              \"bash\"              11 days ago         Exited (130) 11 days ago                                  youthful_noyce    0433f774c394        devops              \"bash\"              11 days ago         Created                                                   stupefied_hawking    1ba39e023554        devops              \"bash\"              11 days ago         Created                                                   practical_ptolemy    4a6bc8cf7ab0        devops              \"bash\"              11 days ago         Created                                                   vigilant_curie    47cb14ca5b1b        devops              \"bash\"              2 weeks ago    Exited (255) 11 days ago         0.0.0.0:8000->8000/tcp   determined_goldwasser    7af5f14f88d9        f418f33054e8        \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  modest_hypatia    e3292cdc1449        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  competent_hugle    3ad630752ebf        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  amazing_meitner    fe439d8e15c2        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks a                        docker imagesThis command should give you the list of images that are available on the system."}, "title": "term"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "It has its own process namespace separate from its host's namespace and from the namespace of any other containers running on that host."}, "title": "name"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The separate namespace also provides the container with its own hostname, its own user IDs, and its own inter-process communication names."}, "title": "name"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker run --name algo_website -p 127.0.0.1:8080:80 -v /Users/prashant/school/algos/:/usr/share/nginx/html -d nginxPlease don't forget to change the location of algorithms directory in above command."}, "title": "name"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "It has its own process namespace separate from its host's namespace and from the namespace of any other containers running on that host."}, "title": "space"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The separate namespace also provides the container with its own hostname, its own user IDs, and its own inter-process communication names."}, "title": "space"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "To provide our full suite of development tools, such as the correct Python version, make, flake8, various Python libraries, etc., in one simple to build package, so all developer's have a consistent environment."}, "title": "correct"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "That code can then be put under version control, tested, deployed with automated build tools, and so on."}, "title": "put"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In one of the two shells, in your OnlineDevops directory, please run: ./container.sh That should put you inside the OnlineDevops container: if that command worked, you should see your prompt change."}, "title": "put"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker pull nginxNow that you have installed the nginx image, just run the docker images command again, in the list you should see ngnix image as below:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    nginx                 latest              71c43202b8ac        7 hours ago         109MB    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    (You can put an image into DockerHub using docker push.)"}, "title": "put"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "We will put the code of website inside the container so that the webserver which is nginx in our case can read the html files and host it in local server."}, "title": "put"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "If we need to remove a container that is still running, we will have to stop it first with docker stop."}, "title": "first"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "(This is a fantastic 3 minute explanation of the value of Infrastructure as Code.)"}, "title": "explanation"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "To provide our full suite of development tools, such as the correct Python version, make, flake8, various Python libraries, etc., in one simple to build package, so all developer's have a consistent environment."}, "title": "flake8"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "(Source: Wikipedia on Infrastructure as Code )A DevOps principle: Asking people to behave like automatons bores and dehumanizes them."}, "title": "principle"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our More Advanced Docker UsageIn the Online DevOps course project, we use a more advanced Docker setup: we employ Docker Compose to define and run an application composed of more than one Docker container."}, "title": "fine"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "You can find the code for the website here."}, "title": "find"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Secondly: Please clone (if you have not already) our online DevOps repo: git clone https://github.com/gcallah/OnlineDevops.gitOnce you have cloned that repo, please open two shells: in one, we will look at your local environment, and in the other we will explore the container."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In one of the two shells, in your OnlineDevops directory, please run: ./container.sh That should put you inside the OnlineDevops container: if that command worked, you should see your prompt change."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "If it did, let's explore the shells you are in a little to try to understand better what a container is."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "I am going to proceed by showing you the results of running the same command inside and outside the container on my machine: your results will be different, but similar, to mine."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "First of all, let's look at the root file system, inside and outside the container:Outside the container: ls /     Macintosh:OnlineDevops gcallah$ ls /    Applications            bin                net    Library                cores                opt    Network                debug.txt            private    Shockwave Log            debug.txt.1            sbin    System                dev                tmp    User Guides And Information    etc                usr    User Information        home                var    Users                installer.failurerequests    Volumes                logFile.xsl                    Inside the container: ls /     root@a5dd222a9812:/home/DevOps# ls /    bin   dev  home  lib64    mnt  proc           root  sbin  sys    usr    boot  etc  lib     media    opt  requirements.txt  run   srv   tmp    var                    What's of note here: From outside and from inside the container, we see completely different file systems!"}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Inside the container, we are in a chroot file system."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Outside the container we see: ps -ef | wc -l      Macintosh:OnlineDevops gcallah$ ps -ef | wc -l     667                    From outside the container, the OS lists 667 processes as running on my Mac."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Inside the container we see: ps -ef     root@a5dd222a9812:/home/DevOps# ps -ef    UID        PID  PPID  C STIME TTY          TIME CMD    root         1     0  0 Oct25 pts/0    00:00:00 bash    root       192     1  0 21:18 pts/0    00:00:00 ps -ef                    From inside the container, there are two processes running!"}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The container has process isolation from the host."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "It has its own process namespace separate from its host's namespace and from the namespace of any other containers running on that host."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The separate namespace also provides the container with its own hostname, its own user IDs, and its own inter-process communication names."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "When Prof. Callahan runs it while preparing this lecture, he sees:     Macintosh:OnlineDevops gcallah$ docker ps    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                     NAMES    429ff1a37d21        devops              \"bash\"              11 seconds ago    Up 6 seconds        0.0.0.0:32768->8000/tcp   stupefied_swanson                    (The 0.0.0.0 is the IP address to use for the container, and 32768 is the port it is using.)"}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Download website codeOk now that you have download the nginx image, let's download the static website that you are going to host inside the docker container."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Let's make a containerOk, so we have downloaded the nginx image and the code of the website which we want to host All we need to do is just make a container out of the image."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "We will put the code of website inside the container so that the webserver which is nginx in our case can read the html files and host it in local server."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "After we leave the container, we can get rid of it using docker rm algo_website."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "If we need to remove a container that is still running, we will have to stop it first with docker stop."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Ultimately, we should be deploying the container where we locally test our web servers right into production, guaranteeing that development and production are identical environments."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "So we need to know how to create the right container for each project."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "So, in the makefile we want something like:container: $(DOCKER_DIR)/Dockerfile $(DOCKER_DIR)/requirements.txt         docker build -t indra dockerHere is a sample Dockerfile."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The COPY requirements.txt /requirements.txt line brings the requirements file inside the container."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The line RUN pip install -r requirements.txt installs everything from the requirements file in the container."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The line ENV user_type TERMINAL sets an environment variable (user_type) that will be available inside the container."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "WORKDIR /home/IndrasNet/ sets the starting directory inside the container."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our More Advanced Docker UsageIn the Online DevOps course project, we use a more advanced Docker setup: we employ Docker Compose to define and run an application composed of more than one Docker container."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Docker Compose use a YAML file to specify the configuration of a multi-container Docker app."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In the Online DevOps course setup, we are running just two containers: one to run the MySQL database, and the other to run our Django web server."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Here is the YAML file that specifies our two-container application."}, "title": "contain"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Speed of deployment: It is much faster to configure infrastructure by running a script than by manually setting a bunch of parameters in a GUI interface."}, "title": "much"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "We will put the code of website inside the container so that the webserver which is nginx in our case can read the html files and host it in local server."}, "title": "case"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Secondly: Please clone (if you have not already) our online DevOps repo: git clone https://github.com/gcallah/OnlineDevops.gitOnce you have cloned that repo, please open two shells: in one, we will look at your local environment, and in the other we will explore the container."}, "title": "look"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "First of all, let's look at the root file system, inside and outside the container:Outside the container: ls /     Macintosh:OnlineDevops gcallah$ ls /    Applications            bin                net    Library                cores                opt    Network                debug.txt            private    Shockwave Log            debug.txt.1            sbin    System                dev                tmp    User Guides And Information    etc                usr    User Information        home                var    Users                installer.failurerequests    Volumes                logFile.xsl                    Inside the container: ls /     root@a5dd222a9812:/home/DevOps# ls /    bin   dev  home  lib64    mnt  proc           root  sbin  sys    usr    boot  etc  lib     media    opt  requirements.txt  run   srv   tmp    var                    What's of note here: From outside and from inside the container, we see completely different file systems!"}, "title": "look"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Some Docker commandsNow let's look at what some Docker commands are available, and what they do."}, "title": "look"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "For example in Prashant's system it looks something like this:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    In the above listing, the nginx image is not installed."}, "title": "look"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Lower error rates: It is error-prone, because it is boring, too configure systems \"by hand.\""}, "title": "error"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Other ReadingsContainers are eating the worldInfrastructure automationA Behavior Driven Developer's guide to Infrastructure as Code"}, "title": "guide"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Asking them to devise clever ways to automate things interests them, and treats them as the rational beings that they are!"}, "title": "things"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Speed of deployment: It is much faster to configure infrastructure by running a script than by manually setting a bunch of parameters in a GUI interface."}, "title": "running"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "I am going to proceed by showing you the results of running the same command inside and outside the container on my machine: your results will be different, but similar, to mine."}, "title": "running"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "What about our view of what processes are running?"}, "title": "running"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Outside the container we see: ps -ef | wc -l      Macintosh:OnlineDevops gcallah$ ps -ef | wc -l     667                    From outside the container, the OS lists 667 processes as running on my Mac."}, "title": "running"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Inside the container we see: ps -ef     root@a5dd222a9812:/home/DevOps# ps -ef    UID        PID  PPID  C STIME TTY          TIME CMD    root         1     0  0 Oct25 pts/0    00:00:00 bash    root       192     1  0 21:18 pts/0    00:00:00 ps -ef                    From inside the container, there are two processes running!"}, "title": "running"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "It has its own process namespace separate from its host's namespace and from the namespace of any other containers running on that host."}, "title": "running"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker psThis will list your currently running Docker images."}, "title": "running"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "If we need to remove a container that is still running, we will have to stop it first with docker stop."}, "title": "running"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In the Online DevOps course setup, we are running just two containers: one to run the MySQL database, and the other to run our Django web server."}, "title": "running"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Here is the requirements file it uses."}, "title": "uses"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "(Source: Wikipedia on Infrastructure as Code )A DevOps principle: Asking people to behave like automatons bores and dehumanizes them."}, "title": "human"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Aristotle: humans are rational animals."}, "title": "human"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "First of all, let's look at the root file system, inside and outside the container:Outside the container: ls /     Macintosh:OnlineDevops gcallah$ ls /    Applications            bin                net    Library                cores                opt    Network                debug.txt            private    Shockwave Log            debug.txt.1            sbin    System                dev                tmp    User Guides And Information    etc                usr    User Information        home                var    Users                installer.failurerequests    Volumes                logFile.xsl                    Inside the container: ls /     root@a5dd222a9812:/home/DevOps# ls /    bin   dev  home  lib64    mnt  proc           root  sbin  sys    usr    boot  etc  lib     media    opt  requirements.txt  run   srv   tmp    var                    What's of note here: From outside and from inside the container, we see completely different file systems!"}, "title": "format"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Furthermore, as code, the infrastructure can be read and reasoned about."}, "title": "read"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Secondly: Please clone (if you have not already) our online DevOps repo: git clone https://github.com/gcallah/OnlineDevops.gitOnce you have cloned that repo, please open two shells: in one, we will look at your local environment, and in the other we will explore the container."}, "title": "read"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "We will put the code of website inside the container so that the webserver which is nginx in our case can read the html files and host it in local server."}, "title": "read"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "When Prof. Callahan runs it while preparing this lecture, he sees:     Macintosh:OnlineDevops gcallah$ docker ps    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                     NAMES    429ff1a37d21        devops              \"bash\"              11 seconds ago    Up 6 seconds        0.0.0.0:32768->8000/tcp   stupefied_swanson                    (The 0.0.0.0 is the IP address to use for the container, and 32768 is the port it is using.)"}, "title": "using"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker pull nginxNow that you have installed the nginx image, just run the docker images command again, in the list you should see ngnix image as below:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    nginx                 latest              71c43202b8ac        7 hours ago         109MB    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    (You can put an image into DockerHub using docker push.)"}, "title": "using"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "After we leave the container, we can get rid of it using docker rm algo_website."}, "title": "using"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The advantages of IaC can be divided into three main categories:Cost savings: By automating hardware provisioning, the time of the people who would have been doing that by hand is freed up for other tasks."}, "title": "people"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "(Source: Wikipedia on Infrastructure as Code )A DevOps principle: Asking people to behave like automatons bores and dehumanizes them."}, "title": "people"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Secondly: Please clone (if you have not already) our online DevOps repo: git clone https://github.com/gcallah/OnlineDevops.gitOnce you have cloned that repo, please open two shells: in one, we will look at your local environment, and in the other we will explore the container."}, "title": "two"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In one of the two shells, in your OnlineDevops directory, please run: ./container.sh That should put you inside the OnlineDevops container: if that command worked, you should see your prompt change."}, "title": "two"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "First of all, let's look at the root file system, inside and outside the container:Outside the container: ls /     Macintosh:OnlineDevops gcallah$ ls /    Applications            bin                net    Library                cores                opt    Network                debug.txt            private    Shockwave Log            debug.txt.1            sbin    System                dev                tmp    User Guides And Information    etc                usr    User Information        home                var    Users                installer.failurerequests    Volumes                logFile.xsl                    Inside the container: ls /     root@a5dd222a9812:/home/DevOps# ls /    bin   dev  home  lib64    mnt  proc           root  sbin  sys    usr    boot  etc  lib     media    opt  requirements.txt  run   srv   tmp    var                    What's of note here: From outside and from inside the container, we see completely different file systems!"}, "title": "two"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Inside the container we see: ps -ef     root@a5dd222a9812:/home/DevOps# ps -ef    UID        PID  PPID  C STIME TTY          TIME CMD    root         1     0  0 Oct25 pts/0    00:00:00 bash    root       192     1  0 21:18 pts/0    00:00:00 ps -ef                    From inside the container, there are two processes running!"}, "title": "two"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our Docker ImplementationWe use Docker in our projects for two main reasons, with a third to come:To set up a local version of a web server that will be configured \"just like\" our production server."}, "title": "two"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In the Online DevOps course setup, we are running just two containers: one to run the MySQL database, and the other to run our Django web server."}, "title": "two"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Here is the YAML file that specifies our two-container application."}, "title": "two"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Asking them to devise clever ways to automate things interests them, and treats them as the rational beings that they are!"}, "title": "beings"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "You won't get any further in following along on your laptop if you do not."}, "title": "long"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "That code can then be put under version control, tested, deployed with automated build tools, and so on."}, "title": "automated"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Secondly: Please clone (if you have not already) our online DevOps repo: git clone https://github.com/gcallah/OnlineDevops.gitOnce you have cloned that repo, please open two shells: in one, we will look at your local environment, and in the other we will explore the container."}, "title": "line"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In one of the two shells, in your OnlineDevops directory, please run: ./container.sh That should put you inside the OnlineDevops container: if that command worked, you should see your prompt change."}, "title": "line"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "First of all, let's look at the root file system, inside and outside the container:Outside the container: ls /     Macintosh:OnlineDevops gcallah$ ls /    Applications            bin                net    Library                cores                opt    Network                debug.txt            private    Shockwave Log            debug.txt.1            sbin    System                dev                tmp    User Guides And Information    etc                usr    User Information        home                var    Users                installer.failurerequests    Volumes                logFile.xsl                    Inside the container: ls /     root@a5dd222a9812:/home/DevOps# ls /    bin   dev  home  lib64    mnt  proc           root  sbin  sys    usr    boot  etc  lib     media    opt  requirements.txt  run   srv   tmp    var                    What's of note here: From outside and from inside the container, we see completely different file systems!"}, "title": "line"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Outside the container we see: ps -ef | wc -l      Macintosh:OnlineDevops gcallah$ ps -ef | wc -l     667                    From outside the container, the OS lists 667 processes as running on my Mac."}, "title": "line"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "When Prof. Callahan runs it while preparing this lecture, he sees:     Macintosh:OnlineDevops gcallah$ docker ps    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                     NAMES    429ff1a37d21        devops              \"bash\"              11 seconds ago    Up 6 seconds        0.0.0.0:32768->8000/tcp   stupefied_swanson                    (The 0.0.0.0 is the IP address to use for the container, and 32768 is the port it is using.)"}, "title": "line"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker ps -a This will list all images that have been run on the system, not just those that are active:     Macintosh:OnlineDevops gcallah$ docker ps -a    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS                    NAMES    c560c3729d7e        devops              \"bash\"              18 minutes ago    Up 18 minutes                    0.0.0.0:8000->8000/tcp   brave_kirch    429ff1a37d21        devops              \"bash\"              About an hour ago   Exited (130) 44 minutes ago                               stupefied_swanson    32b272487675        devops              \"bash\"              5 days ago          Created                                                   wonderful_heyrovsky    a5dd222a9812        devops              \"bash\"              10 days ago         Exited (130) About an hour ago                            naughty_beaver    e82e4fb65823        devops              \"bash\"              11 days ago         Exited (130) 11 days ago                                  youthful_noyce    0433f774c394        devops              \"bash\"              11 days ago         Created                                                   stupefied_hawking    1ba39e023554        devops              \"bash\"              11 days ago         Created                                                   practical_ptolemy    4a6bc8cf7ab0        devops              \"bash\"              11 days ago         Created                                                   vigilant_curie    47cb14ca5b1b        devops              \"bash\"              2 weeks ago    Exited (255) 11 days ago         0.0.0.0:8000->8000/tcp   determined_goldwasser    7af5f14f88d9        f418f33054e8        \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  modest_hypatia    e3292cdc1449        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  competent_hugle    3ad630752ebf        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  amazing_meitner    fe439d8e15c2        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks a                        docker imagesThis command should give you the list of images that are available on the system."}, "title": "line"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Each project we work on should have a Dockerfile consisting of instructions on how to build the image for that project, a requirements.txt listing what external modules need to be included in the image, and a line in the project's makefile automating the build of the image."}, "title": "line"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The COPY requirements.txt /requirements.txt line brings the requirements file inside the container."}, "title": "line"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The line RUN pip install -r requirements.txt installs everything from the requirements file in the container."}, "title": "line"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The line ENV user_type TERMINAL sets an environment variable (user_type) that will be available inside the container."}, "title": "line"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our More Advanced Docker UsageIn the Online DevOps course project, we use a more advanced Docker setup: we employ Docker Compose to define and run an application composed of more than one Docker container."}, "title": "line"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In the Online DevOps course setup, we are running just two containers: one to run the MySQL database, and the other to run our Django web server."}, "title": "line"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Unfortunately, at the moment, the places we are hosting do not support that."}, "title": "places"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Lower error rates: It is error-prone, because it is boring, too configure systems \"by hand.\""}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "First of all, let's look at the root file system, inside and outside the container:Outside the container: ls /     Macintosh:OnlineDevops gcallah$ ls /    Applications            bin                net    Library                cores                opt    Network                debug.txt            private    Shockwave Log            debug.txt.1            sbin    System                dev                tmp    User Guides And Information    etc                usr    User Information        home                var    Users                installer.failurerequests    Volumes                logFile.xsl                    Inside the container: ls /     root@a5dd222a9812:/home/DevOps# ls /    bin   dev  home  lib64    mnt  proc           root  sbin  sys    usr    boot  etc  lib     media    opt  requirements.txt  run   srv   tmp    var                    What's of note here: From outside and from inside the container, we see completely different file systems!"}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The separate namespace also provides the container with its own hostname, its own user IDs, and its own inter-process communication names."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "When Prof. Callahan runs it while preparing this lecture, he sees:     Macintosh:OnlineDevops gcallah$ docker ps    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS                     NAMES    429ff1a37d21        devops              \"bash\"              11 seconds ago    Up 6 seconds        0.0.0.0:32768->8000/tcp   stupefied_swanson                    (The 0.0.0.0 is the IP address to use for the container, and 32768 is the port it is using.)"}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker ps -a This will list all images that have been run on the system, not just those that are active:     Macintosh:OnlineDevops gcallah$ docker ps -a    CONTAINER ID        IMAGE               COMMAND             CREATED             STATUS                           PORTS                    NAMES    c560c3729d7e        devops              \"bash\"              18 minutes ago    Up 18 minutes                    0.0.0.0:8000->8000/tcp   brave_kirch    429ff1a37d21        devops              \"bash\"              About an hour ago   Exited (130) 44 minutes ago                               stupefied_swanson    32b272487675        devops              \"bash\"              5 days ago          Created                                                   wonderful_heyrovsky    a5dd222a9812        devops              \"bash\"              10 days ago         Exited (130) About an hour ago                            naughty_beaver    e82e4fb65823        devops              \"bash\"              11 days ago         Exited (130) 11 days ago                                  youthful_noyce    0433f774c394        devops              \"bash\"              11 days ago         Created                                                   stupefied_hawking    1ba39e023554        devops              \"bash\"              11 days ago         Created                                                   practical_ptolemy    4a6bc8cf7ab0        devops              \"bash\"              11 days ago         Created                                                   vigilant_curie    47cb14ca5b1b        devops              \"bash\"              2 weeks ago    Exited (255) 11 days ago         0.0.0.0:8000->8000/tcp   determined_goldwasser    7af5f14f88d9        f418f33054e8        \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  modest_hypatia    e3292cdc1449        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  competent_hugle    3ad630752ebf        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks ago                                  amazing_meitner    fe439d8e15c2        indra               \"bash\"              2 weeks ago         Exited (130) 2 weeks a                        docker imagesThis command should give you the list of images that are available on the system."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker pull nginxNow that you have installed the nginx image, just run the docker images command again, in the list you should see ngnix image as below:     ENG-EJC369-02:$ docker images    REPOSITORY            TAG                 IMAGE ID            CREATED             SIZE    nginx                 latest              71c43202b8ac        7 hours ago         109MB    gcallah/jenkins_py3   latest              21130e104ca1        4 weeks ago         742MB    jenkins               latest              cd14cecfdb3a        6 weeks ago         696MB    gcallah/indra         v7                  ad9670e8b27f        2 months ago        946MB    python                latest              efb6baa1169f        5 months ago        691MB    ubuntu                latest              f975c5035748        5 months ago        112MB    gcallah/emu86         v4                  f6833ae8bf9e        6 months ago        776MB    gcallah/django        latest              432de70e222d        6 months ago        769MB    bash                  latest              59507b30b48a        6 months ago        12.2MB    alpine                latest              3fd9065eaf02        7 months ago        4.15MB                    (You can put an image into DockerHub using docker push.)"}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "We are going to use the algorithms website for another course."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Let's make a containerOk, so we have downloaded the nginx image and the code of the website which we want to host All we need to do is just make a container out of the image."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "docker run --name algo_website -p 127.0.0.1:8080:80 -v /Users/prashant/school/algos/:/usr/share/nginx/html -d nginxPlease don't forget to change the location of algorithms directory in above command."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Windows user should use the address http://0.0.0.0:8080 instead of localhost."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "After we leave the container, we can get rid of it using docker rm algo_website."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our Docker ImplementationWe use Docker in our projects for two main reasons, with a third to come:To set up a local version of a web server that will be configured \"just like\" our production server."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "(\"Just like\" is in quotes because that is always the ideal, but it may not be fully achieved.)"}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "To provide our full suite of development tools, such as the correct Python version, make, flake8, various Python libraries, etc., in one simple to build package, so all developer's have a consistent environment."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The line ENV user_type TERMINAL sets an environment variable (user_type) that will be available inside the container."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Here is the requirements file it uses."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Our More Advanced Docker UsageIn the Online DevOps course project, we use a more advanced Docker setup: we employ Docker Compose to define and run an application composed of more than one Docker container."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Docker Compose use a YAML file to specify the configuration of a multi-container Docker app."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "In the Online DevOps course setup, we are running just two containers: one to run the MySQL database, and the other to run our Django web server."}, "title": "us"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "First of all, let's look at the root file system, inside and outside the container:Outside the container: ls /     Macintosh:OnlineDevops gcallah$ ls /    Applications            bin                net    Library                cores                opt    Network                debug.txt            private    Shockwave Log            debug.txt.1            sbin    System                dev                tmp    User Guides And Information    etc                usr    User Information        home                var    Users                installer.failurerequests    Volumes                logFile.xsl                    Inside the container: ls /     root@a5dd222a9812:/home/DevOps# ls /    bin   dev  home  lib64    mnt  proc           root  sbin  sys    usr    boot  etc  lib     media    opt  requirements.txt  run   srv   tmp    var                    What's of note here: From outside and from inside the container, we see completely different file systems!"}, "title": "file"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Inside the container, we are in a chroot file system."}, "title": "file"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "We will put the code of website inside the container so that the webserver which is nginx in our case can read the html files and host it in local server."}, "title": "file"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Each project we work on should have a Dockerfile consisting of instructions on how to build the image for that project, a requirements.txt listing what external modules need to be included in the image, and a line in the project's makefile automating the build of the image."}, "title": "file"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "This is infrastructure as code, since the infrastructure for the project is built from these files of code."}, "title": "file"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "So, in the makefile we want something like:container: $(DOCKER_DIR)/Dockerfile $(DOCKER_DIR)/requirements.txt         docker build -t indra dockerHere is a sample Dockerfile."}, "title": "file"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The COPY requirements.txt /requirements.txt line brings the requirements file inside the container."}, "title": "file"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The line RUN pip install -r requirements.txt installs everything from the requirements file in the container."}, "title": "file"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Here is the requirements file it uses."}, "title": "file"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Docker Compose use a YAML file to specify the configuration of a multi-container Docker app."}, "title": "file"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Here is the YAML file that specifies our two-container application."}, "title": "file"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "Why is it important?"}, "title": "important"}, {"info": {"url": "http://127.0.0.1:8000/devops/infra", "page": "infrassture as code", "sentence": "The line ENV user_type TERMINAL sets an environment variable (user_type) that will be available inside the container."}, "title": "variable"}]